<!DOCTYPE html>
<html>
<head>
<title>Anjali Admin</title>
<link rel="stylesheet" href="style.css">
<style>
#memoryBox{
  border:1px solid #ccc;
  padding:10px;
  margin-top:10px;
  max-height:300px;
  overflow-y:auto;
  display:none; /* hidden by default */
}
</style>
</head>
<body>

<div class="app">
  <h2>üß† Teach Anjali</h2>

  <input id="q" placeholder="Question">
  <input id="a" placeholder="Answer">

  <button onclick="teach()">üíæ Save</button>
  <hr>
<h3>üë§ Primary User</h3>
<input id="ownerName" placeholder="Primary user name">
<button onclick="Ethos.setPrimaryUser(document.getElementById('ownerName').value)">
  Set Owner
</button>
  <button onclick="toggleMemory()">üìö Show Knowledge</button>

  <div id="memoryBox"></div>
</div>
<script src="Ethos.js"></script>
<script src="./ResponseEngine.js"></script>

<script>
let memoryVisible = false;

function teach(){
  const q = document.getElementById("q").value;
  const a = document.getElementById("a").value;

  if(!q || !a){
    alert("Question ‡§î‡§∞ Answer ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§≠‡§∞‡§®‡§æ ‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à");
    return;
  }

  saveQA(q, a);

  document.getElementById("q").value = "";
  document.getElementById("a").value = "";

  alert("Saved");
}

function toggleMemory(){
  memoryVisible = !memoryVisible;
  const box = document.getElementById("memoryBox");

  if(memoryVisible){
    loadMemory();
    box.style.display = "block";
  }else{
    box.style.display = "none";
  }
}

function loadMemory(){
  const raw = showMemory();

  if(!raw){
    document.getElementById("memoryBox").innerHTML = "‡§ï‡•ã‡§à ‡§ú‡•ç‡§û‡§æ‡§® ‡§Ö‡§≠‡•Ä ‡§∏‡•á‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à";
    return;
  }

  const lines = raw.split("<br>");
  let html = "";
  for(let i=0; i<lines.length; i++){
    if(lines[i].trim()){
      html += (i+1) + ". " + lines[i] + "<br>";
    }
  }

  document.getElementById("memoryBox").innerHTML = html;
}
</script>

</body>
</html>
