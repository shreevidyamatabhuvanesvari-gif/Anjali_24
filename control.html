<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Anjali тАУ Study Control Center</title>

<style>
body{margin:0;font-family:system-ui;background:#f5f6fa}
header{background:#8b2d2d;color:#fff;padding:15px;text-align:center;font-size:20px}
#container{display:flex;height:calc(100vh - 60px)}
#left{width:320px;background:#fff;border-right:1px solid #ddd;overflow:auto}
#right{flex:1;padding:15px;overflow:auto}

.list-item{padding:10px 15px;border-bottom:1px solid #eee;cursor:pointer}
.list-item:hover{background:#f1f1f1}
.active{background:#ffe1cf;font-weight:bold}

textarea,input{width:100%;padding:8px;margin:6px 0;border:1px solid #ccc;border-radius:6px}
button{padding:10px 14px;border:none;border-radius:8px;background:#8b2d2d;color:white;margin:4px;cursor:pointer}
.secondary{background:#555}

.box{border:1px dashed #bbb;padding:10px;margin-top:10px;border-radius:8px;background:#fafafa}
</style>
</head>

<body>

<header>ЁЯУЪ Anjali тАУ Study Control Center</header>

<div id="container">
<div id="left">
  <h3 style="text-align:center">ЁЯУЦ рд╡рд┐рд╖рдп рд╕реВрдЪреА</h3>
</div>

<div id="right">
  <h3 id="path">рдХреЛрдИ рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ</h3>

  <div class="box">
    <b>тЬНя╕П рдкреНрд░рд╢реНрди</b>
    <textarea id="question"></textarea>

    <b>рд╡рд┐рдХрд▓реНрдк</b>
    <input id="a" placeholder="A">
    <input id="b" placeholder="B">
    <input id="c" placeholder="C">
    <input id="d" placeholder="D">

    <b>рд╕рд╣реА рдЙрддреНрддрд░</b>
    <input id="correct">

    <b>рдЙрддреНрддрд░ рд╡реНрдпрд╛рдЦреНрдпрд╛</b>
    <textarea id="explain"></textarea>

    <button onclick="saveQuestion()">ЁЯТ╛ Save</button>
    <button class="secondary" onclick="deleteQuestion()">ЁЯЧС Delete Last</button>
  </div>

  <div class="box">
    <b>ЁЯУД рд▓реЗрдЦ рд╕реЗ рдкреНрд░рд╢реНрди рдмрдирд╛рдПрдВ (GK & Hindi)</b>
    <textarea id="article" style="min-height:200px" placeholder="рдпрд╣рд╛рдБ рдкреВрд░рд╛ рд▓реЗрдЦ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВтАж"></textarea>
    <button onclick="generateFromArticle()">тЪб MCQ рдмрдирд╛рдП</button>
    <button class="secondary" onclick="clearArticle()">ЁЯз╣ рд▓реЗрдЦ рд╣рдЯрд╛рдПрдБ</button>
    <button class="secondary" onclick="showQuestions()">ЁЯСБя╕П рд╕рднреА рдкреНрд░рд╢реНрди рджреЗрдЦреЗрдВ</button>
  </div>

  <div class="box">
    <b>ЁЯУВ рдЗрд╕ рд╡рд┐рд╖рдп рдХреЗ рд╕рднреА рдкреНрд░рд╢реНрди</b>
    <div id="view"></div>
  </div>

  <div class="box">
    <button onclick="startAnjaliTest()">ЁЯОЩя╕П рдЕрдВрдЬрд▓реА рд╕реЗ рдкреНрд░рд╢реНрди рдмреЛрд▓рд╡рд╛рдПрдБ</button>
  </div>

</div>
</div>

<script>
/* ===============================
   SYLLABUS
================================ */
const GK=["A. History","B. Geography","C. Polity","D. Economy","E. Science","F. Current Affairs"];
const HINDI=["A. рд╡рд░реНрдгрдорд╛рд▓рд╛","B. рд╕рдВрдзрд┐","C. рд╕рдорд╛рд╕","D. рдЙрдкрд╕рд░реНрдЧ","E. рдкреНрд░рддреНрдпрдп","F. рдкрд░реНрдпрд╛рдпрд╡рд╛рдЪреА","G. рд╡рд┐рд▓реЛрдо","H. рдЕрдиреЗрдХрд╛рд░реНрдереА","I. рддрддреНрд╕рдо-рддрджреНрднрд╡","J. рд▓реЛрдХреЛрдХреНрддрд┐рдпрд╛рдБ","K. рдореБрд╣рд╛рд╡рд░реЗ","L. рд╡рд╛рдХреНрдп рд╢реБрджреНрдзрд┐","M. рд╡рд░реНрддрдиреА","N. рд╡рд╛рдХреНрдпрд╛рдВрд╢","O. рд╢рдмреНрдж рд╢реБрджреНрдзрд┐","P. рдХрд╛рд░рдХ","Q. рд▓рд┐рдВрдЧ","R. рд╡рдЪрди","S. рдХрд╛рд▓","T. рд░рд╕","U. рдЫрдВрдж","V. рдЕрд▓рдВрдХрд╛рд░","W. рдЕрдкрдард┐рдд рдЧрджреНрдпрд╛рдВрд╢","X. рдЕрдкрдард┐рдд рдкрджреНрдпрд╛рдВрд╢","Y. рд╡рд╛рдХреНрдп рд░реВрдкрд╛рдВрддрд░рдг","Z. рд╡рд╛рдХреНрдп рд╕рдВрдпреЛрдЬрди"];
const NUM="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(x=>x+". рднрд╛рдЧ");
const REASON="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(x=>x+". рднрд╛рдЧ");

let data=JSON.parse(localStorage.getItem("anjaliStudy"))||{
 exams:{
  "UP Police Constable":{
   "General Knowledge":Object.fromEntries(GK.map(k=>[k,[]])),
   "General Hindi":Object.fromEntries(HINDI.map(k=>[k,[]])),
   "Numerical & Mental Ability":Object.fromEntries(NUM.map(k=>[k,[]])),
   "Mental Aptitude / Reasoning":Object.fromEntries(REASON.map(k=>[k,[]]))
  }
 }
};

let path=[];
function save(){localStorage.setItem("anjaliStudy",JSON.stringify(data));}

/* UI */
function buildLeft(){
 let left=document.getElementById("left");
 left.innerHTML="<h3 style='text-align:center'>ЁЯУЦ рд╡рд┐рд╖рдп рд╕реВрдЪреА</h3>";
 for(let s in data.exams["UP Police Constable"]){
  let d=document.createElement("div");
  d.className="list-item"; d.textContent=s;
  d.onclick=()=>openSubject(s);
  left.appendChild(d);
 }
}

function openSubject(s){
 path=[s];
 let left=document.getElementById("left"); left.innerHTML="";
 for(let k in data.exams["UP Police Constable"][s]){
  let d=document.createElement("div");
  d.className="list-item"; d.textContent=k;
  d.onclick=()=>openTopic(s,k);
  left.appendChild(d);
 }
}

function openTopic(s,t){
 path=[s,t];
 document.getElementById("path").innerText=s+" тЖТ "+t;
 showQuestions();
}

/* Manual Q */
function saveQuestion(){
 if(path.length<2)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 data.exams["UP Police Constable"][path[0]][path[1]].push({
  q:question.value,a:a.value,b:b.value,c:c.value,d:d.value,
  correct:correct.value,explain:explain.value
 });
 save(); showQuestions();
}

function deleteQuestion(){
 if(path.length<2)return;
 data.exams["UP Police Constable"][path[0]][path[1]].pop();
 save(); showQuestions();
}

function showQuestions(){
 let arr = data.exams["UP Police Constable"][path[0]][path[1]];

 view.innerHTML = arr.map((q,i)=>`
  <div style="border:1px solid #ccc; padding:8px; margin:8px 0; border-radius:6px; background:#fff">
    <b>${i+1}. ${q.q}</b><br>
    A) ${q.a || "-"}<br>
    B) ${q.b || "-"}<br>
    C) ${q.c || "-"}<br>
    D) ${q.d || "-"}<br>
    <b>тЬФ рд╕рд╣реА рдЙрддреНрддрд░:</b> ${q.correct || "-"}<br>
    <i>ЁЯУЭ рд╡реНрдпрд╛рдЦреНрдпрд╛:</i> ${q.explain || "-"}
  </div>
 `).join("");
}

/* ЁЯза ARTICLE тЖТ REAL MCQ */
function generateFromArticle(){
 if(path.length<2)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 const text=article.value.trim();
 if(text.length<80)return alert("рд▓реЗрдЦ рдЫреЛрдЯрд╛ рд╣реИ");

 let facts=[];

 if(text.match(/\d{3,4}\s*рдИрд╕рд╛\s*рдкреВрд░реНрд╡/))
  facts.push({q:"рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╣рдбрд╝рдкреНрдкрд╛ рдХрд╛рд▓ рдХрдм рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ?",ans:text.match(/\d{3,4}\s*рдИрд╕рд╛\s*рдкреВрд░реНрд╡/)[0]});

 if(text.includes("рдЧреЗрд╣реВрдБ"))
  facts.push({q:"рдХреМрди-рд╕реА рдлрд╕рд▓реЗрдВ рдЙрдЧрд╛рдИ рдЬрд╛рддреА рдереАрдВ?",ans:"рдЧреЗрд╣реВрдБ, рдЬреМ рдФрд░ рдордЯрд░"});

 if(text.includes("рдмреИрд▓"))
  facts.push({q:"рдХреМрди рд╕реЗ рдкрд╢реБ рдкрд╛рд▓реЗ рдЬрд╛рддреЗ рдереЗ?",ans:"рдмреИрд▓, рднреЗрдбрд╝ рдФрд░ рдмрдХрд░реА"});

 if(text.includes("рддрд╛рдВрдмреЗ"))
  facts.push({q:"рдХреМрди рд╕реА рдзрд╛рддреБрдУрдВ рдХреЗ рдФрдЬрд╛рд░ рдереЗ?",ans:"рддрд╛рдВрдмрд╛ рдФрд░ рдХрд╛рдВрд╕рд╛"});

 if(text.includes("рд╡реНрдпрд╛рдкрд╛рд░"))
  facts.push({q:"рд╡реНрдпрд╛рдкрд╛рд░ рдХрд┐рд╕ рд╕реНрддрд░ рдкрд░ рдерд╛?",ans:"рд╕реАрдорд┐рдд рд╕реНрддрд░ рдкрд░"});

 if(facts.length===0)return alert("рд▓реЗрдЦ рд╕реЗ рддрдереНрдп рдирд╣реАрдВ рдорд┐рд▓реЗ");

 facts.forEach(f=>{
  let opts=shuffle([f.ans,"рд▓реЛрд╣рд╛","рдХреЛрдИ рдирд╣реАрдВ","рд╢рд┐рдХрд╛рд░ рдкрд░ рдЖрдзрд╛рд░рд┐рдд"]);
  let c=["A","B","C","D"][opts.indexOf(f.ans)];
  data.exams["UP Police Constable"][path[0]][path[1]].push({
   q:f.q,a:opts[0],b:opts[1],c:opts[2],d:opts[3],
   correct:c,explain:"рд▓реЗрдЦ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕рд╣реА рдЙрддреНрддрд░: "+f.ans
  });
 });

 save(); showQuestions();
 alert("MCQ рдмрди рдЧрдП");
}

function shuffle(a){return a.sort(()=>Math.random()-0.5);}

/* ЁЯз╣ Clear article */
function clearArticle(){
 article.value="";
}

/* ЁЯОЩя╕П Speak */
function startAnjaliTest(){
 let qs=data.exams["UP Police Constable"][path[0]][path[1]];
 let i=0;
 function speak(){
  if(i>=qs.length)return;
  let q=qs[i];
  let msg=q.q+" рд╡рд┐рдХрд▓реНрдк рдП "+q.a+", рдмреА "+q.b+", рд╕реА "+q.c+", рдбреА "+q.d;
  let u=new SpeechSynthesisUtterance(msg);u.lang="hi-IN";
  speechSynthesis.speak(u);
  i++;u.onend=()=>setTimeout(speak,800);
 }
 speak();
}

buildLeft();
</script>

</body>
</html>
