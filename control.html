<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Anjali тАУ Study Control Center</title>
<style>
body{margin:0;font-family:system-ui;background:#f5f6fa}
header{background:#8b2d2d;color:#fff;padding:15px;text-align:center;font-size:20px}
#container{display:flex;height:calc(100vh - 60px)}
#left{width:320px;background:#fff;border-right:1px solid #ddd;overflow:auto}
#right{flex:1;padding:15px;overflow:auto}
.list-item{padding:10px 15px;border-bottom:1px solid #eee;cursor:pointer}
.list-item:hover{background:#f1f1f1}
.active{background:#ffe1cf;font-weight:bold}
textarea,input{width:100%;padding:8px;margin:6px 0;border:1px solid #ccc;border-radius:6px}
button{padding:10px 14px;border:none;border-radius:8px;background:#8b2d2d;color:white;margin:4px;cursor:pointer}
.secondary{background:#555}
.box{border:1px dashed #bbb;padding:10px;margin-top:10px;border-radius:8px;background:#fafafa}
</style>
</head>
<body>
<header>ЁЯУЪ Anjali тАУ Study Control Center</header>

<div id="container">
<div id="left"><h3 style="text-align:center">ЁЯУЦ рд╡рд┐рд╖рдп рд╕реВрдЪреА</h3></div>
<div id="right">
<h3 id="path">рдХреЛрдИ рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ</h3>

<div class="box">
<b>тЬНя╕П рдПрдХ MCQ</b>
<textarea id="question"></textarea>
<input id="a" placeholder="A"><input id="b" placeholder="B">
<input id="c" placeholder="C"><input id="d" placeholder="D">
<input id="correct" placeholder="Correct (A/B/C/D)">
<textarea id="explain" placeholder="рд╡реНрдпрд╛рдЦреНрдпрд╛"></textarea>
<button onclick="saveQuestion()">ЁЯТ╛ Save</button>
<button class="secondary" onclick="deleteQuestion()">ЁЯЧС Delete Last</button>
</div>

<div class="box">
<b>ЁЯУЪ Bulk MCQ (Q | A | Explanation)</b>
<textarea id="bulk" style="min-height:120px" placeholder="рдкреНрд░рд╢реНрди | рд╕рд╣реА рдЙрддреНрддрд░ | рд╡реНрдпрд╛рдЦреНрдпрд╛"></textarea>
<button onclick="saveBulk()">Save Bulk</button>
</div>

<div class="box">
<b>ЁЯУД Article тЖТ Exam MCQ</b>
<textarea id="article" style="min-height:160px"></textarea>
<button onclick="generateFromArticle()">тЪб MCQ рдмрдирд╛рдП</button>
<button class="secondary" onclick="clearArticle()">ЁЯз╣ рд▓реЗрдЦ рд╣рдЯрд╛рдПрдБ</button>
</div>

<div class="box">
<button onclick="showQuestions()">ЁЯСБя╕П рдкреНрд░рд╢реНрди рджрд┐рдЦреЗрдВ</button>
<button onclick="startAnjaliTest()">ЁЯОЩя╕П рдЕрдВрдЬрд▓реА</button>
</div>

<div class="box"><div id="view"></div></div>
</div></div>

<script>
/* ===== SYLLABUS ===== */
const GK=["A. History","B. Geography","C. Polity","D. Economy","E. Science","F. Current Affairs"];
const HINDI=["A. рд╡рд░реНрдгрдорд╛рд▓рд╛","B. рд╕рдВрдзрд┐","C. рд╕рдорд╛рд╕","D. рдЙрдкрд╕рд░реНрдЧ","E. рдкреНрд░рддреНрдпрдп","F. рдкрд░реНрдпрд╛рдпрд╡рд╛рдЪреА","G. рд╡рд┐рд▓реЛрдо","H. рдЕрдиреЗрдХрд╛рд░реНрдереА","I. рддрддреНрд╕рдо-рддрджреНрднрд╡","J. рд▓реЛрдХреЛрдХреНрддрд┐рдпрд╛рдБ","K. рдореБрд╣рд╛рд╡рд░реЗ","L. рд╡рд╛рдХреНрдп рд╢реБрджреНрдзрд┐","M. рд╡рд░реНрддрдиреА","N. рд╡рд╛рдХреНрдпрд╛рдВрд╢","O. рд╢рдмреНрдж рд╢реБрджреНрдзрд┐","P. рдХрд╛рд░рдХ","Q. рд▓рд┐рдВрдЧ","R. рд╡рдЪрди","S. рдХрд╛рд▓","T. рд░рд╕","U. рдЫрдВрдж","V. рдЕрд▓рдВрдХрд╛рд░","W. рдЕрдкрдард┐рдд рдЧрджреНрдпрд╛рдВрд╢","X. рдЕрдкрдард┐рдд рдкрджреНрдпрд╛рдВрд╢","Y. рд╡рд╛рдХреНрдп рд░реВрдкрд╛рдВрддрд░рдг","Z. рд╡рд╛рдХреНрдп рд╕рдВрдпреЛрдЬрди"];
const NUM="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(x=>x+". рднрд╛рдЧ");
const REASON="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(x=>x+". рднрд╛рдЧ");

let data=JSON.parse(localStorage.getItem("anjaliStudy"))||{
 exams:{ "UP Police Constable":{
  "General Knowledge":Object.fromEntries(GK.map(k=>[k,[]])),
  "General Hindi":Object.fromEntries(HINDI.map(k=>[k,[]])),
  "Numerical & Mental Ability":Object.fromEntries(NUM.map(k=>[k,[]])),
  "Mental Aptitude / Reasoning":Object.fromEntries(REASON.map(k=>[k,[]]))
 }}};

let path=[];
function save(){localStorage.setItem("anjaliStudy",JSON.stringify(data));}

/* ===== TREE ===== */
function buildLeft(){
 let left=document.getElementById("left");
 left.innerHTML="<h3 style='text-align:center'>ЁЯУЦ рд╡рд┐рд╖рдп рд╕реВрдЪреА</h3>";
 for(let s in data.exams["UP Police Constable"]){
  let d=document.createElement("div"); d.className="list-item"; d.textContent=s;
  d.onclick=()=>openSubject(s); left.appendChild(d);
 }
}
function openSubject(s){
 path=[s]; let left=document.getElementById("left"); left.innerHTML="";
 for(let k in data.exams["UP Police Constable"][s]){
  let d=document.createElement("div"); d.className="list-item"; d.textContent=k;
  d.onclick=()=>openTopic(s,k); left.appendChild(d);
 }
}
function openTopic(s,t){ path=[s,t]; pathEl().innerText=s+" тЖТ "+t; showQuestions(); }
function pathEl(){ return document.getElementById("path"); }

/* ===== MANUAL SAVE ===== */
function saveQuestion(){
 if(path.length<2)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 data.exams["UP Police Constable"][path[0]][path[1]].push(
 {q:question.value,a:a.value,b:b.value,c:c.value,d:d.value,correct:correct.value,explain:explain.value});
 save(); showQuestions();
}
function deleteQuestion(){
 if(path.length<2)return;
 data.exams["UP Police Constable"][path[0]][path[1]].pop(); save(); showQuestions();
}

/* ===== BULK ===== */
function saveBulk(){
 if(path.length<2)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 bulk.value.split("\n").forEach(l=>{
  let p=l.split("|");
  if(p.length>=3){
   data.exams["UP Police Constable"][path[0]][path[1]].push(
    {q:p[0].trim(),a:p[1].trim(),b:"",c:"",d:"",correct:"A",explain:p[2].trim()}
   );
  }
 });
 save(); showQuestions(); alert("Bulk Saved");
}

/* ===== VIEW ===== */
function showQuestions(){
 let arr=data.exams["UP Police Constable"][path[0]][path[1]];
 view.innerHTML=arr.map((q,i)=>`
 <div style="border:1px solid #ccc;padding:8px;margin:8px 0;border-radius:6px;background:#fff">
 <b>${i+1}. ${q.q}</b><br>
 A) ${q.a||"-"}<br>B) ${q.b||"-"}<br>C) ${q.c||"-"}<br>D) ${q.d||"-"}<br>
 тЬФ <b>${q.correct||"-"}</b><br><i>ЁЯУЭ ${q.explain||"-"}</i></div>`).join("");
}

/* ===== ARTICLE тЖТ ECONOMY EXAM ENGINE (NO DUPLICATES) ===== */

function generateFromArticle(){
 if(path.length<2)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 const text = article.value.trim();
 if(text.length<80)return alert("рд▓реЗрдЦ рдЫреЛрдЯрд╛ рд╣реИ");

 let lines = text.split(/[ред.\n]/);
 let facts = [];
 let added = {};   // ЁЯСИ duplicate guard

 function addFact(q, ans){
   if(!added[q]){
     added[q] = true;
     facts.push({q:q, ans:ans});
   }
 }

 lines.forEach(line=>{

  /* 1я╕ПтГг Sectors */
  if(line.includes("рдХреГрд╖рд┐") && line.includes("рдЙрджреНрдпреЛрдЧ") && line.includes("рд╕реЗрд╡рд╛")){
   addFact(
    "рднрд╛рд░рддреАрдп рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд┐рди рддреАрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ?",
    "рдХреГрд╖рд┐, рдЙрджреНрдпреЛрдЧ рдФрд░ рд╕реЗрд╡рд╛ рдХреНрд╖реЗрддреНрд░"
   );
  }

  /* 2я╕ПтГг Institutions */
  if(line.includes("рд░рд┐рдЬрд╝рд░реНрд╡ рдмреИрдВрдХ") || line.includes("RBI")){
   addFact(
    "рднрд╛рд░рдд рдХреА рдореМрджреНрд░рд┐рдХ рдиреАрддрд┐ рдХреМрди рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ?",
    "рднрд╛рд░рддреАрдп рд░рд┐рдЬрд╝рд░реНрд╡ рдмреИрдВрдХ"
   );
  }

  /* 3я╕ПтГг Policies */
  if(line.includes("рдЙрджрд╛рд░реАрдХрд░рдг") || line.includes("1991")){
   addFact(
    "рднрд╛рд░рдд рдореЗрдВ рдЖрд░реНрдерд┐рдХ рдЙрджрд╛рд░реАрдХрд░рдг рдХрдм рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛?",
    "1991"
   );
  }

  /* 4я╕ПтГг Banking */
  if(line.includes("рдмреИрдВрдХ")){
   addFact(
    "рдмреИрдВрдХрд┐рдВрдЧ рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп рдХреНрдпрд╛ рд╣реИ?",
    "рдЛрдг рдФрд░ рдореБрджреНрд░рд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди"
   );
  }

  /* 5я╕ПтГг Globalisation */
  if(line.includes("рд╡рд┐рджреЗрд╢реА рдирд┐рд╡реЗрд╢") || line.includes("рд╡реИрд╢реНрд╡рд┐рдХ")){
   addFact(
    "рдЙрджрд╛рд░реАрдХрд░рдг рдХреЗ рдмрд╛рдж рднрд╛рд░рдд рдореЗрдВ рдХрд┐рд╕рдХрд╛ рдкреНрд░рд╡рд╛рд╣ рдмрдврд╝рд╛?",
    "рд╡рд┐рджреЗрд╢реА рдирд┐рд╡реЗрд╢"
   );
  }

  /* 6я╕ПтГг Employment */
  if(line.includes("рд░реЛрдЬрдЧрд╛рд░")){
   addFact(
    "рднрд╛рд░рдд рдореЗрдВ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд░реЛрдЬрдЧрд╛рд░ рдХрд┐рд╕ рдХреНрд╖реЗрддреНрд░ рд╕реЗ рдорд┐рд▓рддрд╛ рд╣реИ?",
    "рдХреГрд╖рд┐ рдХреНрд╖реЗрддреНрд░"
   );
  }

  /* 7я╕ПтГг Growth */
  if(line.includes("рдЙрднрд░рддреА") || line.includes("рд╡рд┐рдХрд╛рд╕")){
   addFact(
    "рдЖрдЬ рднрд╛рд░рдд рдХреЛ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ?",
    "рдЙрднрд░рддреА рд╣реБрдИ рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛"
   );
  }

  /* 8я╕ПтГг Reforms */
  if(line.includes("рд╕реБрдзрд╛рд░")){
   addFact(
    "рдЖрд░реНрдерд┐рдХ рд╕реБрдзрд╛рд░реЛрдВ рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рдХреНрдпрд╛ рдерд╛?",
    "рдЖрд░реНрдерд┐рдХ рд╡рд┐рдХрд╛рд╕ рдХреЛ рддреЗрдЬ рдХрд░рдирд╛"
   );
  }

  /* 9я╕ПтГг Government */
  if(line.includes("рд╕рд░рдХрд╛рд░") || line.includes("рдиреАрддрд┐")){
   addFact(
    "рджреЗрд╢ рдХреА рдЖрд░реНрдерд┐рдХ рдиреАрддрд┐ рдХреМрди рдмрдирд╛рддрд╛ рд╣реИ?",
    "рд╕рд░рдХрд╛рд░"
   );
  }

  /* ЁЯМН Global Economy */
  if(line.includes("World Bank") || line.includes("рд╡рд┐рд╢реНрд╡ рдмреИрдВрдХ")){
   addFact(
    "рд╡рд┐рд╢реНрд╡ рдмреИрдВрдХ рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп рдХреНрдпрд╛ рд╣реИ?",
    "рд╡рд┐рдХрд╛рд╕рд╢реАрд▓ рджреЗрд╢реЛрдВ рдХреЛ рдЖрд░реНрдерд┐рдХ рд╕рд╣рд╛рдпрддрд╛ рджреЗрдирд╛"
   );
  }

  if(line.includes("IMF") || line.includes("рдЕрдВрддрд░рд░рд╛рд╖реНрдЯреНрд░реАрдп рдореБрджреНрд░рд╛ рдХреЛрд╖")){
   addFact(
    "IMF рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рдХреНрдпрд╛ рд╣реИ?",
    "рд╡реИрд╢реНрд╡рд┐рдХ рдореМрджреНрд░рд┐рдХ рд╕реНрдерд┐рд░рддрд╛ рдмрдирд╛рдП рд░рдЦрдирд╛"
   );
  }

  if(line.includes("WTO")){
   addFact(
    "WTO рдХрд┐рд╕рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИ?",
    "рдЕрдВрддрд░рд░рд╛рд╖реНрдЯреНрд░реАрдп рд╡реНрдпрд╛рдкрд╛рд░"
   );
  }

  if(line.includes("рдореБрджреНрд░рд╛") || line.includes("рдбреЙрд▓рд░") || line.includes("Euro")){
   addFact(
    "рдЕрдВрддрд░рд░рд╛рд╖реНрдЯреНрд░реАрдп рд╡реНрдпрд╛рдкрд╛рд░ рдХрд┐рд╕рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рд╣реЛрддрд╛ рд╣реИ?",
    "рдореБрджреНрд░рд╛ рд╡рд┐рдирд┐рдордп рджрд░"
   );
  }

 });

 if(facts.length===0) return alert("рддрдереНрдп рдирд╣реАрдВ рдорд┐рд▓реЗ");

 facts.forEach(f=>{
  let wrongs=["рд▓реЛрд╣рд╛ рдЖрдзрд╛рд░рд┐рдд","рдХреЗрд╡рд▓ рд╢рд┐рдХрд╛рд░","рдХреЛрдИ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ"];
  wrongs.sort(()=>Math.random()-0.5);

  let opts=[f.ans,wrongs[0],wrongs[1]];
  opts.sort(()=>Math.random()-0.5);
  opts.push("рдХреЛрдИ рдирд╣реАрдВ"); // D рд╣рдореЗрд╢рд╛

  let c=["A","B","C","D"][opts.indexOf(f.ans)];

  data.exams["UP Police Constable"][path[0]][path[1]].push({
   q:f.q, a:opts[0], b:opts[1], c:opts[2], d:opts[3],
   correct:c,
   explain:"ЁЯУЭ " + f.ans
  });
 });

 save();
 showQuestions();
 alert("рдбреБрдкреНрд▓рд┐рдХреЗрдЯ-рдлреНрд░реА MCQ рдмрдиреЗ");
}
function clearArticle(){article.value="";}

/* ===== VOICE ===== */
function startAnjaliTest(){
 let qs=data.exams["UP Police Constable"][path[0]][path[1]]; let i=0;
 function speak(){ if(i>=qs.length)return;
  let q=qs[i]; let u=new SpeechSynthesisUtterance(q.q+" рд╡рд┐рдХрд▓реНрдк рдП "+q.a+", рдмреА "+q.b+", рд╕реА "+q.c+", рдбреА "+q.d);
  u.lang="hi-IN"; speechSynthesis.speak(u); i++; u.onend=()=>setTimeout(speak,700);
 } speak();
}

buildLeft();
</script>
</body>
</html>
